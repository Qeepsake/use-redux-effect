{"version":3,"file":"index.js","sources":["../src/use-redux-effect.ts","../src/reducers/action-reducer.ts"],"sourcesContent":["/**\n * @author Aspect Apps Limited\n * @description\n */\n\nimport { useRef, useEffect, DependencyList } from 'react'\nimport { useStore } from 'react-redux'\nimport _ from 'lodash'\nimport { ReduxEffect } from './redux-effect'\n\n/**\n * Subscribes to redux store events\n *\n * @param effect\n * @param type\n * @param deps\n */\nexport function useReduxEffect(\n  effect: ReduxEffect,\n  type: string,\n  deps: DependencyList = [],\n): void {\n  const currentValue = useRef(null)\n  const store = useStore()\n\n  const handleChange = (): void => {\n    const state = store.getState()\n    const action = state.action\n    const previousValue = currentValue.current\n    currentValue.current = action.count\n\n    if (\n      previousValue !== action.count &&\n      _.castArray(type).includes(action.type)\n    ) {\n      effect(action)\n    }\n  }\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(handleChange)\n    return (): void => unsubscribe()\n  }, deps)\n}\n","/**\n * @author Luke Brandon Farrell\n * @description Application reducer.\n */\n\nimport { AnyAction } from 'redux'\n\ninterface InitialState {\n  type: string | null\n  payload: any\n  meta: any\n  error: boolean\n  count: number\n}\n\n/**\n * Initial data.\n */\nconst initialState: InitialState = {\n  type: null,\n  payload: null,\n  meta: null,\n  error: false,\n  count: 0,\n}\n\n/**\n * Calculates the application state.\n *\n * @param state\n * @param action\n * @return {*}\n */\nexport const actionReducer = (\n  state = initialState,\n  action: AnyAction,\n): InitialState => {\n  return {\n    ...state,\n    ...action,\n    count: state.count + 1,\n  }\n}\n"],"names":["useReduxEffect","effect","type","deps","currentValue","useRef","store","useStore","handleChange","state","getState","action","previousValue","current","count","_","castArray","includes","useEffect","unsubscribe","subscribe","initialState","payload","meta","error","actionReducer"],"mappings":";;;;;;SAiBgBA,eACdC,QACAC,MACAC;MAAAA;AAAAA,IAAAA,OAAuB;;;AAEvB,MAAMC,YAAY,GAAGC,YAAM,CAAC,IAAD,CAA3B;AACA,MAAMC,KAAK,GAAGC,mBAAQ,EAAtB;;AAEA,MAAMC,YAAY,GAAG,SAAfA,YAAe;AACnB,QAAMC,KAAK,GAAGH,KAAK,CAACI,QAAN,EAAd;AACA,QAAMC,MAAM,GAAGF,KAAK,CAACE,MAArB;AACA,QAAMC,aAAa,GAAGR,YAAY,CAACS,OAAnC;AACAT,IAAAA,YAAY,CAACS,OAAb,GAAuBF,MAAM,CAACG,KAA9B;;AAEA,QACEF,aAAa,KAAKD,MAAM,CAACG,KAAzB,IACAC,CAAC,CAACC,SAAF,CAAYd,IAAZ,EAAkBe,QAAlB,CAA2BN,MAAM,CAACT,IAAlC,CAFF,EAGE;AACAD,MAAAA,MAAM,CAACU,MAAD,CAAN;AACD;AACF,GAZD;;AAcAO,EAAAA,eAAS,CAAC;AACR,QAAMC,WAAW,GAAGb,KAAK,CAACc,SAAN,CAAgBZ,YAAhB,CAApB;AACA,WAAO;AAAA,aAAYW,WAAW,EAAvB;AAAA,KAAP;AACD,GAHQ,EAGNhB,IAHM,CAAT;AAID;;;;;;;;;;;;;;;;;;;;ACzBD,IAAMkB,YAAY,GAAiB;AACjCnB,EAAAA,IAAI,EAAE,IAD2B;AAEjCoB,EAAAA,OAAO,EAAE,IAFwB;AAGjCC,EAAAA,IAAI,EAAE,IAH2B;AAIjCC,EAAAA,KAAK,EAAE,KAJ0B;AAKjCV,EAAAA,KAAK,EAAE;AAL0B,CAAnC;AAeA,IAAaW,aAAa,GAAG,SAAhBA,aAAgB,CAC3BhB,KAD2B,EAE3BE,MAF2B;MAC3BF;AAAAA,IAAAA,QAAQY;;;AAGR,sBACKZ,KADL,EAEKE,MAFL;AAGEG,IAAAA,KAAK,EAAEL,KAAK,CAACK,KAAN,GAAc;AAHvB;AAKD,CATM;;;;;"}